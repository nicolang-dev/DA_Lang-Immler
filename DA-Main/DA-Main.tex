\documentclass[]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[ngerman]{babel}
\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{hyperref}

\usepackage{graphicx}
\graphicspath{ {./images/} }

\title{\textbf{Multi-Room Sound Adapter}}
\author{Nico Lang, Philipp Immler}
\date{Februar 2025}

\begin{document}

\maketitle
\thispagestyle{empty}

\pagebreak

\section{Projekt}
\subsection{Projektteam}
\textbf{Nico Lang}\\
Wirtschaftsingenieure/Betriebsinformatik\\
Grießau\\
6651 Häselgehr AT\\
Nico.Lang@hak-reutte.ac.at\\
\\
\textbf{Philipp Immler}\\
Wirtschaftsingenieure/Betriebsinformatik\\
Hoheneggweg 21a\\
6682 Vils AT\\
Philipp.Immler@hak-reutte.ac.at

\pagebreak

\subsection{Eidesstattliche Erklärung}
Hiermit versichere ich, dass ich die vorliegende Arbeit selbstständig verfasst und keine anderen Hilfsmittel als die angegebenen benützt habe. Die Stellen, die anderen Werken (gilt ebenso für Werke aus elektronischen Datenbanken oder aus dem Internet) wörtlich oder sinngemäß entnommen sind, habe ich unter Angabe der Quelle und Einhaltung der Regeln wissenschaftlichen Zitierens kenntlich gemacht. Diese Versicherung umfasst auch in der Arbeit verwendete bildliche Darstellungen, Tabellen, Skizzen und Zeichnungen. Für die Erstellung der Arbeit habe ich auch folgende Hilfsmittel generativer KI-Tools (ChatGPT 3.5) zu folgendem Zweck verwendet: Inspiration und allgemeine Information. Auch Übersetzer (DeepL) wurden zur Hilfe genommen. Die verwendeten Hilfsmittel wurden vollständig und wahrheitsgetreu inkl. Produktversion und Prompt ausgewiesen.\\

\vspace{30mm}

\noindent
\begin{minipage}[c]{5cm}
	\centering \dotfill \\
	Ort, Datum
\end{minipage}
\hfill
    \begin{minipage}[c]{5cm}
        \centering \dotfill \\
        Unterschrift Schüler/in
    \end{minipage}
    
\vspace{10mm}

\noindent
\begin{flushright}
    \begin{minipage}[c]{5cm}
        \centering \dotfill \\
        Unterschrift Schüler/in
    \end{minipage}
\end{flushright}

\pagebreak

\subsection{Abstract Deutsch}
\subsection{Abstract English}
\subsection{Danksagung}

\tableofcontents

\section{Einleitung}

Hier befindet sich die allgemeine Einleitung der Diplomarbeit.

\subsection{Einleitung Hardware}
Der Teil der Hardware für folgende Diplomarbeit beschäftigt sich damit, einen sinnvollen internen Aufbau des Geräts zu erzielen, die am besten geeigneten Hardware-Komponenten zu finden, das System bzw. die einzelnen Komponenten zusammenzubauen (Platine) und zu testen. Dieser Teil der Diplomarbeit wird von Nico Lang übernommen.
Zudem beschäftigt sich dieser Teil mit dem optischen Design des Geräts (Gehäuse) und bestimmt die technischen Anforderungen (Schnittstellen), die der Adapter letztendlich haben soll. 
Bei der Planung soll darauf geachtet werden, möglichst viele Kosten einzusparen, ohne dabei die Faktoren der Sicherheit und Qualität zu vergessen.

\subsection{Einleitung Software}
Der Teil der Software für folgende Diplomarbeit beschäftigt sich damit, einerseits die Software des Adapters, andererseits die Software der Smartphoneapp zu entwickeln. Dieser Teil der Diplomarbeit wird von Philipp Immler übernommen. Die Software des Adapters wird mit der Programmiersprache C++ codiert. Die Software der Smartphoneapp wird mit JavaScript codiert. Um eine bestmögliche Leistung und Effizienz zu garantieren, werden bei der Programmierung zahlreiche Bibliotheken und Frameworks verwendet. Bei der Entwicklung der Software wird ein großes Augenmerk auf Sicherheit und Effizienz gelegt. 

\section{Planung}
\subsection{Festlegung Funktionsweise}
GEMEINSAM
\subsection{Auswahl Hardwarekomponenten}
Zur Auswahl der Hardwarekomponenten des Adapters wird zu aller erst die externe Ausstattung des Adapters überlegt. Das bedeutet praktisch alles, mit dem ein Endverbraucher letztendlich zu tun hat. Dann kann der interne Teil, also die Technik dahinter, individuell auf die Anforderungen des externen Teils designet und entwickelt werden.
\subsubsection{Auswahl externe Hardware}
Der Adapter soll ein möglichst kompakt konstruiertes und stabiles Gehäuse bekommen. An diesem wird ein einfacher Taster zur Interaktion angebracht. Mit dem Taster sollen einige Funktionen des Adapters ermöglicht werden. Beispielsweise per Klick, Doppelklick oder kurzem Halten. Da sich die Aufgaben des Tasters selbst gering halten werden (Verbindungsvorgang, Ein- und Ausschalten, ...) wird nur ein einziger Taster verwendet, um die Komplexität des Gesamtsystems zu senken. Die weitaus komplizierteren Funktionen sollen alle samt in der Smartphone-Applikation ermöglicht werden. Zusätzlich werden eine oder mehrere Leuchtdioden zur Statusanzeige verbaut, um beispielsweise den aktuellen Verbindungsstatus zum Mobilgerät und zum Internet oder den aktuellen Akkustand anzuzeigen. \newline \\
\textbf{Gehäuse} \newline
Das Gehäuse soll alle Komponenten auf möglichst kleinem Raum zusammenhalten. Da sich Komponenten und möglicherweise auch das Design selbst laufend ändern, wird dieses deshalb erst gegen Ende des Projekts finalisiert werden können. \newline \\
\textbf{Taster} \newline
Für den Taster wird ein herkömmlicher Knopf in das Gehäuse eingelassen.  \newline \\
\textbf{LED (Light-Emitting Diode)} \newline
Es ist durchaus bekannt, dass Leuchtdioden im Vergleich zu anderer Lichttechnik effizienter sind. \newline
Laut \newline
\url{https://ledtipps.net/wirkungsgrad/#wirkungsgrad-und-lichtausbeute-im-vergleich}
"Grundsätzlich fällt der Wirkungsgrad bei höheren Leistungen immer etwas besser aus." \newline
In der folgenden Tabelle aus \newline
\url{https://ledtipps.net/wirkungsgrad/#wirkungsgrad-und-lichtausbeute-im-vergleich} 
wird der Wirkungsgrad sowie die Lichtausbeute unter herkömmlicher Lichttechnik verglichen. \newline

\begin{tabularx}{\textwidth}{|l|l|X|}
\hline
\textbf{Leuchtmittel} & 
\textbf{Wirkungsgrad} & 
\textbf{Lichtausbeute} \\
\hline
LED & 25-40\% & 80 – 150 lm/W \\
\hline 
Energiesparlampe & 15-25\% & 40 – 60 lm/W \\
\hline
Halogenlampe & 8-12\% & 15 – 20 lm/W \\
\hline
Glühlampe & 3-5\% & 10 – 15 lm/W \\
\hline
\end{tabularx} \newline \\
Für dieses Projekt bedeutet das, dass die Leuchtdiode wohl die effizienteste Methode für eine Statusanzeige auf dem Adapter ist. Dies trägt unter anderem zu einer längeren Akkulaufzeit bei.

\subsubsection{Auswahl interne Hardware}

\subsection{Auswahl Technologien}
\subsubsection{Protokolle}
In diesem Kapitel geht es um die Recherche und Auswahl von Protokollen, die für den Austausch von Daten verwendet werden.
\newline \\
\textbf{HTTP}
\newline
Das Hyper Text Transfer Protocol wird für den Datenaustausch zwischen Microcontroller und Smartphone verwendet. Dabei läuft auf dem Microcontroller ein Webserver an den das Smartphone HTTP-Anfragen sendet. Dabei wird eine REST-API angewendet. Folgende Routen sind dabei auf dem Webserver aufrufbar: \newline

\begin{tabularx}{\textwidth}{|l|l|X|}
\hline
\textbf{Route} & \textbf{Anfragen-Typ} & \textbf{Funktion} \\
\hline
/getInfo & GET & Client bekommt Infos vom Microcontroller \\
\hline 
/getAvailableNetworks & GET & Client bekommt eine Liste im JSON-Format, gefüllt mit SSID und RSSI (Stärke) von verfügbaren Netzwerken in der Nähe des Microcontrollers \\
\hline
/setWiFiCredentials & POST & Client sendet SSID und Passwort des gewünschten Netzwerks an den Microcontroller \\
\hline
/setStreamUrl & POST & Client sendet die URL des gewünschten Audio-Streams an den Microcontroller \\
\hline
\end{tabularx}
\newline \\
\textbf{I2S}
\newline
Das Inter IC Sound Protocol wird verwendet, um Stereo-Audio-Daten zwischen ICs auszutauschen. Es benötigt für die Datenübertragung folgende Leitungen: \\
\begin{itemize}
\item Taktleitung
\item Wortauswahl
\item mindestens eine Datenleitung
\end{itemize}
Die Datenübertragung erfolgt seriell und synchron. Seriell bedeutet, dass die Daten nur durch eine Leitung (die Datenleitung) übertragen werden. Synchron bedeutet, dass die Daten in einem bestimmten Takt übertragen werden. Dieser Takt wird von der Taktleitung vorgegeben. Die Leitung für die Wortauswahl wählt den Stereokanal aus (links oder rechts). (vgl. https://www.mikrocontroller.net/articles/I2S) \\
In unserem Projekt wird das I2S Protokoll verwendet, um die digitalen Stereo-Audio-Daten vom Microcontroller an den Digital-Analag-Wandler zu übertragen.
Dabei werden die digitalen Buffer, die der Microcontroller vom Audio-Stream erhält, mittels I2S an den Digital-Analog-Wandler gesendet, welcher die digitalen Daten in analoge Daten umwandelt, so dass diese dann anschließend auf der Lautsprecherbox ausgegeben werden können.
\subsection{Auswahl Softwaretools}
\subsubsection{Einleitung}
In diesem Kapitel geht es um die Recherche und Auswahl von geeigneten Softwaretools, welche für die App-Entwicklung, als auch für die Entwicklung der Software des Microcontrollers verwendet werden. Zusätzlich werden auch die Softwaretools zum Schreiben dieser Diplomarbeit kurz beschrieben. \\
\textbf{LaTeX} \\
"LaTeX ist ein hochwertiges Schriftsatzsystem, das Funktionen für die Erstellung technischer und wissenschaftlicher Dokumentationen enthält. LaTeX ist der De-facto-Standard für die Kommunikation und Veröffentlichung von wissenschaftlichen Dokumenten." (Übersetzung des englischen Originals von: https://www.latex-project.org/) \\
Wir haben uns für das Schreiben unserer Diplomarbeit in LaTeX entschieden, weil es sich sehr gut für wissenschaftliche Arbeiten eignet und wir somit schon damit vertraut sind, wenn wir es in der Zukunft brauchen. \\
\textbf{draw.io}
"draw.io ist eine kostenlose Online-Diagrammsoftware zur Erstellung von Flussdiagrammen, Prozessdiagrammen, Organigrammen, UML, ER und Netzwerkdiagrammen." (Übersetzung des englischen Originals von: https://app.diagrams.net/) \\
Wir haben alle Diagramme unserer Diplomarbeit in draw.io erstellt, weil es einfach zu handhaben ist und es eine große Auwahl an Diagrammtypen und Formen gibt. \\
\textbf{Visual Studio Code} \\
"Visual Studio Code ist ein leichtgewichtiger, aber leistungsstarker Quellcode-Editor, der auf Ihrem Desktop läuft und für Windows, macOS und Linux verfügbar ist. Er bietet integrierte Unterstützung für JavaScript, TypeScript und Node.js und verfügt über ein umfangreiches Ökosystem von Erweiterungen für andere Sprachen und Laufzeiten (wie C++, C\#, Java, Python, PHP, Go, .NET)." (Übersetzung des englischen Originals von: https://code.visualstudio.com/docs) \\
Wir haben Visual Studio Code als IDE für unsere Diplomarbeit gewählt, weil durch die unzähligen Erweiterungen viele verschieden Programmiersprachen und Bibliotheken unterstützt und wir auch schon etwas Erfahrung damit haben. \\
\textbf{GitHub} \\
"GitHub ist eine webbasierte Schnittstelle, die Git verwendet, die Open-Source-Software zur Versionskontrolle, mit der mehrere Personen gleichzeitig separate Änderungen an Webseiten vornehmen können. Wie Carpenter anmerkt, fördert GitHub die Zusammenarbeit von Teams bei der Erstellung und Bearbeitung von Website-Inhalten, da es eine Zusammenarbeit in Echtzeit ermöglicht." (Übersetzung des englischen Originals von: https://digital.gov/resources/an-introduction-github/) \\
Wir verwenden GitHub für die Verwaltung unseres Codes und unserer Dokumente. Der Vorteil dabei ist, dass jedes Projektmitglied auf seinem lokalen PC an den Dokumenten arbeiten kann und die Änderungen dann per GitHub synchronisiert werden können. \\
\textbf{DeepL}
Wir verwenden DeepL um englische Texte, welche für unsere Diplomarbeit relevant sind, ins Deutsche zu übersetzen. Wir haben uns für DeepL entschieden weil dieser einer der genauesten Übersetzer ist und man dießen außerdem kostenlos nutzen kann.
\subsubsection{Softwaretools Microcontroller}
Im folgenden werden die verwendeten Bibliotheken im Code des Microcontrollers aufgezählt und kurz beschrieben: \\
\textbf{Arduino} \\
Die Arduino-Bibliothek wird verwendet um den ESP32 ähnlich wie einen Arduino programmieren zu können. Es erleichtert dabei die Programmierung enorm, vorallem dann, wenn man schon Vorerfahrung mit der Programmierung von Arduinos hat. \\
\textbf{WiFi} \\
\url{https://github.com/arduino-libraries/WiFi} \\
Die WiFi-Bibliothek wird verwendet, um die Funktionen der eingebauten WiFi-Antenne des ESP32 zu verwenden. Der ESP32 kann dabei entweder als Access Point oder als Client fungieren. Wenn er als Access Point fungiert, stellt er ein eigenes WiFi-Netzwerk bereit, mit dem sich andere Geräte verbinden können und der ESP32 somit einen Host darstellt. Als Client kann er sich mit anderen WiFi-Netzwerken bzw. Access Points verbinden. In unserem Projekt fungiert der ESP32 sowohl als Access Point, als auch als Client.\\
\textbf{ArduinoJson} \\
Die ArduinoJson-Bibliothek wird verwendet, um Daten in das JSON vormat zu kodieren. Der Vorteil dabei ist, dass JSON ein weit verbreitetes Format in der Informatik ist und deshalb mit vielen Schnittstellen funktioniert. In unserem Projekt wird die ArduinoJson-Bibliothek für den einheitlichen Datenaustausch zwischen Webserver (ESP32) und Client (Smartphone) verwendet. \\
\textbf{WebServer} \\
Die WebServer-Bibliothek wird verwendet, um einen Webserver auf dem ESP32 bereitzustellen. Dieser ist wichtig für den Datenaustausch mittels HTTP, zwischen ESP32 und Smartphone. Mithilfe des Webserver wird einerseits das WiFi-Passwort des gewählten WLANs, als auch die URL des Audiostreams an den ESP32 geleitet. In die andere Richtung, werden grundlegende WiFi-Informationen und verfügbare WiFi-Netzwerke vom ESP32 bereitgestellt. \\
\textbf{Audio} \\
Die Audio-Bibliothek wird verwendet, um die Audio-Daten mittels I2S-Protokoll an den Digital-Analog-Wandler zu senden und diesen zu konfigurieren. Der ESP32 verfügt bereits standartmäßig über Funktionen, mit deren Hilfe man Audiodaten mittels I2S übertragen kann. Allerdings bereitet dies einen viel höheren Aufwand für Konfiguration usw. Daher verwenden wir in unserem Projekt die Audio-Bibliothek.
\subsubsection{Softwaretools Smartphoneapp}
Für die Entwicklung der Smartphoneapp wurde das "React Native"  - Framework verwendet. Mithilfe von React Native ist es möglich eine zentrale Applikation zu entwickeln und diese dann auf mehreren Plattformen wie IOS, Android und auch im Web zu verwenden. React Native basiert auf React, welches ein Framework für die Frontend-Entwicklung ist. Außerdem wird die Radio-Browser-API für die bereitstellung diverser Internetradios verwendet.


\section{Entwicklung}
\subsection{Design Platine}
\subsection{Bestückung Platine}
\subsection{Entwicklung Software Adapter}
In diesem Kapitel wird der Übergang der Planung in die Entwicklung der Software des Adapters beschrieben. 
Zur Entwicklung der Software des Microcontrollers wird die IDE Visual Studio Code in Verbindung mit PlatformIO verwendet. Um die Entwicklung einfacher und übersichtlicher zu gestalten, wird die Arduino-Bibliothek in Verbindung mit C++ verwendet.
\newline \\
\textbf{Programmablauf}
\newline
Der Ablauf des Programmes wird mit folgendem UML-Ablaufdiagramm veranschaulicht:
hier kommt das UML-Ablaufdiagramm her
\newline \\
\textbf{Klassen}
\newline
Bei der Entwicklung der Microcontroller-Software wurde aufgrund der Übersichtlichkeit und um die Design-Patterns der Softwareentwicklung einzuhalten, auf objektorientierte Programmierung gesetzt. Das folgende UML-Klassendiagramm veranschaulicht die Beziehung der verschiedenen Klassen zueinander:
hier kommt das UML-Klassendiagramm her
Im folgenden Teil werden die Klassen und deren Funktionen noch näher beschrieben:
\newline \\
\textbf{StatusLED} \\
Mithilfe der Klasse StatusLED wird die RGB-LED, welche am ESP32 angeschlossen ist, gesteuert. \\
\textbf{NetworkManager} \\
Die Klasse NetworkManager kümmert sich um alle Funktionen, die mit dem WiFi des ESP32 zu tun haben. \\
\textbf{AudioManager} \\
Die Klasse AudioManager regelt hauptsächlich das Senden der Audiodaten, vom ESP32 an den Digital-Analog Wandler, mittels I2S-Protokoll. 
\subsection{Entwicklung Smartphone-App}
In diesem Kapitel wird der Übergang der Planung in die Entwicklung der Smartphone-App beschrieben. 
\subsection{Design Adaptergehäuse}
\subsection{Fertigung Adaptergehäuse}

\section{Testen und Fehlerbehebung}
\subsection{Testen des Gesamtsystems}
\subsection{auftretende Fehler beheben}
\subsection{Test auf Cybersecurity}
In diesem Kapitel wird der gesamte Code auf Sicherheitslücken getestet.
\subsection{Auftretende Sicherheitslücken schließen}
In diesem Kapitel werden die bei den Tests aufgetretenen Sicherheitslücken geschlossen.

\section{Einzelnachweise}
\subsection{Literaturverzeichnis}
\subsection{Abbildungsverzeichnis}
\subsection{Anhang}

\end{document}